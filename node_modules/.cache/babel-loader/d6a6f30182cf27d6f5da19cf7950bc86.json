{"ast":null,"code":"!function (e, t) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? t(exports, require(\"node-vibrant\"), require(\"lodash.camelcase\"), require(\"lodash.invoke\"), require(\"react\")) : \"function\" == typeof define && define.amd ? define([\"exports\", \"node-vibrant\", \"lodash.camelcase\", \"lodash.invoke\", \"react\"], t) : t(e.reactPalette = {}, e.Vibrant, e.camelCase, e.invoke, e.react);\n}(this, function (e, t, a, r, n) {\n  t = t && t.hasOwnProperty(\"default\") ? t.default : t, a = a && a.hasOwnProperty(\"default\") ? a.default : a, r = r && r.hasOwnProperty(\"default\") ? r.default : r;\n\n  var o = \"default\" in n ? n.default : n,\n      c = function (e) {\n    try {\n      return Promise.resolve(t.from(e).getPalette()).then(function (e) {\n        return Object.keys(e).reduce(function (t, n) {\n          var o;\n          return Object.assign({}, t, ((o = {})[a(n)] = r(e, [n, \"getHex\"]), o));\n        }, {});\n      });\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  },\n      l = {\n    loading: !0,\n    data: {},\n    error: void 0\n  };\n\n  function u(e, t) {\n    switch (t.type) {\n      case \"getPalette\":\n        return l;\n\n      case \"resolvePalette\":\n        return Object.assign({}, e, {\n          data: t.payload,\n          loading: !1\n        });\n\n      case \"rejectPalette\":\n        return Object.assign({}, e, {\n          error: t.payload,\n          loading: !1\n        });\n    }\n  }\n\n  function i(e) {\n    var t = n.useReducer(u, l),\n        a = t[0],\n        r = t[1];\n    return n.useEffect(function () {\n      r({\n        type: \"getPalette\"\n      }), c(e).then(function (e) {\n        r({\n          type: \"resolvePalette\",\n          payload: e\n        });\n      }).catch(function (e) {\n        r({\n          type: \"rejectPalette\",\n          payload: e\n        });\n      });\n    }, [e]), a;\n  }\n\n  var d = function (e) {\n    var t = e.children,\n        a = i(e.src);\n    return o.createElement(o.Fragment, null, t(a));\n  };\n\n  e.default = d, e.getPalette = c, e.Palette = d, e.usePalette = i;\n});","map":{"version":3,"sources":["../src/getPalette.ts","../src/usePalette.tsx","../src/Palette.tsx"],"names":["getPalette","src","palette","Vibrant","from","acc","paletteName","Object","camelCase","invoke","keys","reduce","initialState","loading","data","error","undefined","reducer","state","action","type","payload","usePalette","useReducer","useEffect","dispatch","then","catch","ex","Palette","ref","React","children"],"mappings":"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","sourcesContent":["import Vibrant from \"node-vibrant\";\nimport camelCase from \"lodash.camelcase\";\nimport invoke from 'lodash.invoke';\n\nexport type PaletteColors = {\n  vibrant?: string;\n  muted?: string;\n  darkVibrant?: string;\n  darkMuted?: string;\n  lightVibrant?: string;\n  lightMuted?: string;\n  [name: string]: string | undefined;\n};\n\nexport async function getPalette(src: string) {\n  const palette = await Vibrant.from(src).getPalette();\n  const setPaletteColor = (acc, paletteName) => ({\n    ...acc,\n    [camelCase(paletteName)]: invoke(palette, [paletteName, 'getHex'])\n  });\n\n  return Object.keys(palette).reduce<PaletteColors>(setPaletteColor, {});\n}\n","import { useEffect, useReducer } from \"react\";\nimport { getPalette, PaletteColors } from \"./getPalette\";\n\nexport type PaletteState = {\n  loading: boolean;\n  error?: Error;\n  data: PaletteColors;\n}\n\nconst initialState: PaletteState = {\n  loading: true,\n  data: {},\n  error: undefined\n}\n\nfunction reducer(state: PaletteState, action) {\n  switch (action.type) {\n    case 'getPalette':\n      return initialState;\n    case 'resolvePalette':\n      return { ...state, data: action.payload, loading: false };\n    case 'rejectPalette':\n      return { ...state, error: action.payload, loading: false };\n  }\n}\n\nexport function usePalette(src: string) {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  useEffect(() => {\n    dispatch({ type: 'getPalette' });\n\n    getPalette(src)\n      .then(palette => {\n        dispatch({ type: 'resolvePalette', payload: palette });\n      })\n      .catch(ex => {\n        dispatch({ type: 'rejectPalette', payload: ex });\n      });\n  }, [src]);\n\n  return state;\n}\n","import React, { ReactNode } from \"react\";\nimport { PaletteState, usePalette } from \"./usePalette\";\n\nexport type PaletteProps = {\n  src: string;\n  children(palette: PaletteState): ReactNode;\n};\n\nexport const Palette: React.FC<PaletteProps> = ({\n  src,\n  children\n}: PaletteProps) => {\n  const palette = usePalette(src);\n\n  return <>{children(palette)}</>;\n};\n"]},"metadata":{},"sourceType":"script"}